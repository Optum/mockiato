<h2>Finalize Recording</h2>
<h4 ng-show="!canEdit()" class="text-info">You are unable to edit this service because you aren't part of the group "{{servicevo.sut.name}}".</h4>
<fieldset ng-disabled="!canEdit()">
<form name="form" class="well col-xs-12">
  <div class="form-group row">
    <label for="service_payloadtype" class="col-xs-2 col-form-label">Service Type:</label>
    <div class="col-xs-8">
      <div class="radio">
        <label class="move-radios">
            <input ng-model="servicevo.type" id="service_type" type="radio" ng-value="'SOAP'" ng-disabled="true">
              SOAP
        </label>
        <label class="move-radios">
            <input ng-model="servicevo.type" id="service_type" type="radio" ng-value="'REST'" ng-disabled="true">
              REST
        </label>
        <!--<label class="move-radios">
          <input ng-model="servicevo.type" id="service_type" type="radio" ng-value="'MQ'" ng-disabled="true">
            MQ
        </label>-->
      </div>
    </div>
  </div>

  <div class="form-group row">
    <label for="system_under_test" class="col-xs-2 col-form-label">Group:</label>
    <div class="col-xs-2">
      <input required type="text" id="system_under_test" class="form-control" ng-model="servicevo.sut.name" placeholder="Enter new group" ng-disabled="true">
    </div>
  </div>

  <div class="form-group row">
    <label for="service_name" class="col-xs-2 col-form-label">Name:</label>
    <div class="col-xs-9">
      <input required type="text" id="service_name" class="form-control" ng-model="servicevo.name" placeholder="Enter Service Name" ng-disabled="true">
    </div>
  </div>

  <div class="form-group row" ng-show="servicevo.type !== 'MQ'">
    <label for="service_base_path" class="col-xs-2 col-form-label">Base Path:</label>
    <div class="col-xs-9">
      <div class="input-group">
        <div class="input-group-addon">/virtual/{{servicevo.sut.name}}/</div>
        <input ng-required="servicevo.type !== 'MQ'" type="text" id="service_endpoint" class="form-control" ng-model="servicevo.basePath" placeholder="Enter Base Path" ng-disabled="false">
      </div>
    </div>
  </div>

  <div class="form-group row">
    <label for="service_delay" class="col-xs-2 col-form-label">Response Delay (ms):</label>
    <div class="col-xs-2">
      <input type="number" id="service_delay" class="form-control" ng-model="servicevo.delay" placeholder="0" ng-pattern="/^[0-9]{1,9}$/"
         onkeypress="return (event.charCode == 8 || event.charCode == 0 || event.charCode == 13) ? null : event.charCode >= 48 
              && event.charCode <= 57" onpaste="return false" />
    </div>
    <div class="col-xs-1 conjunction">to</div>
    <div class="col-xs-2">
        <input type="number" id="service_delayMax" class="form-control" ng-model="servicevo.delayMax" placeholder="0" ng-pattern="/^[0-9]{1,9}$/"
         onkeypress="return (event.charCode == 8 || event.charCode == 0 || event.charCode == 13) ? null : event.charCode >= 48 
              && event.charCode <= 57" onpaste="return false" />
      </div>
  </div>

  <div class="form-group row">
    <label class="col-xs-2 col-form-label">Match Templates:</label>
    <div class="col-xs-9">
      <fieldset data-ng-repeat="template in servicevo.matchTemplates">
        <div class="row">
          <div class="col-xs-10">
            <textarea class="form-control vertResize" ng-model="template.val" placeholder="Define a template for request matching"></textarea><br>
          </div>

          <div class="col-xs-1">
            <button type="button" class="btn btn-warning" ng-show="$last && !$first" ng-click="removeTemplate($index)">
              <span class="glyphicon glyphicon-minus"></span>
            </button>
          </div>

          <div class="col-xs-1">
            <button type="button" class="btn btn-success" ng-show="$last" ng-click="addTemplate()">
              <span class="glyphicon glyphicon-plus"></span>
            </button>
          </div>
        </div>
      </fieldset>
    </div>
  </div>

  <!--<div class="form-group row">
    <label class="col-xs-2 col-form-label">Created At:</label>
    <div class="col-xs-3"><input id="created_datetime" class="form-control" ng-model="servicevo.createdAt" ng-disabled="true"></div>
  </div>

  <div class="form-group row">
    <label class="col-xs-2 col-form-label">Updated At:</label>
    <div class="col-xs-3"><input id="updated_datetime" class="form-control" ng-model="servicevo.updatedAt" ng-disabled="true"></div>
  </div>

  <div class="form-group row">
    <label class="col-xs-2 col-form-label">Updated By:</label>
    <div class="col-xs-3"><input id="updated_user" class="form-control" ng-model="servicevo.lastUpdateUser" ng-disabled="true"></div>
  </div>-->
  <div ng-include="'/partials/rrPairs.html'" ng-controller="rrPairController"></div>
 <div class="form-group row">
    <div class="col-sm-12">
      <button ng-disabled="form.$invalid || (servicevo.rawpairs.length == 0)" type="button" class="btn btn-xl btn-primary center-block" ng-click="publishService(servicevo)">Finalize and Publish</button>
    </div>
  </div>
</fieldset>
</form>

<script>
  $(document).ready(function(){
    $('#req-header-0_value').prop('disabled', true);
    $('#req-head-val-0').prop('disabled', true);
  });
</script>
